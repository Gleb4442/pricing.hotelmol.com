Где логика ломается

20% от чего?
Сейчас: «дополнительные прямые = фактические бронирования × 20%».
Это смешивает две разные вещи:

Перераспределение каналов (часть OTA → Direct) — даёт экономию на комиссии.

Прирост брони в целом (конверсия выросла) — даёт дополнительную выручку, но не «экономию комиссии».

22 «рабочих дня»
Бронирования и переход трафика между каналами происходят 7/7. Использовать фиксированные 22 рабочих дня некорректно — берите реальные дни периода (30/31 в месяц) или используйте среднедневные метрики и умножайте на 
𝑁
N дней периода.

База для комиссии
«Средний доход с брони» нужно чётко определить: это комиссионная база (room revenue до НДС/такс, без апсейлов) или «грязная» выручка? OTA берут комиссию с комиссионной базы. Часто корректнее: ADR × средняя длительность проживания (LOS) = выручка на бронь, с которой и берётся комиссия.

Издержки прямого канала
При «экономии комиссии» у direct всё равно есть себестоимость: эквайринг/платёжный процессинг (2–3%), CRM-рассылки и т.п. Чистую экономию лучше считать как комиссия OTA – прямые платежные издержки.

Состав «обращений»
Если «обращения в день» включают сообщения внутри Booking.com/Airbnb, то «переводить» их в прямые продажи может конфликтовать с правилами OTA. В калькуляторе лучше явно считать только входящие обращения из собственных каналов (сайт/виджет/мессенджеры/телефон), чтобы не вводить отель в серую зону.

Как считать корректно (разложим на две независимые составляющие)

Вводимые параметры (минимум):

𝐼
I — обращений в день (ваши каналы).

𝑐
c — базовая конверсия в бронь (например, 35%).

𝑅
R — средняя комиссионная выручка с брони (ADR × LOS, до налогов).

𝑘
𝑜
𝑡
𝑎
k
ota
	​

 — средняя комиссия OTA (например, 12%).

𝑘
𝑝
𝑟
𝑜
𝑐
k
proc
	​

 — издержки прямого платежа (например, 2.5%).

𝑠
0
s
0
	​

 — базовая доля прямых в бронированиях (до Roomie).

𝑢
𝑐
𝑜
𝑛
𝑣
u
conv
	​

 — относительный прирост конверсии (Roomie даёт +X% к конверсии).

𝑢
𝑠
ℎ
𝑎
𝑟
𝑒
u
share
	​

 — относительный прирост доли direct (например, +20% к доле, а не «20% от всех брони»).

𝐷
D — число дней в периоде (обычно 30).

Базовые расчёты:

Бронирования/день до Roomie: 
𝐵
0
=
𝐼
×
𝑐
B
0
	​

=I×c.

Бронирования/день после Roomie (за счёт лучшей обработки): 
𝐵
1
=
𝐵
0
×
(
1
+
𝑢
𝑐
𝑜
𝑛
𝑣
)
B
1
	​

=B
0
	​

×(1+u
conv
	​

).

Доля direct после Roomie: 
𝑠
1
=
min
⁡
(
1
,
  
𝑠
0
×
(
1
+
𝑢
𝑠
ℎ
𝑎
𝑟
𝑒
)
)
s
1
	​

=min(1,s
0
	​

×(1+u
share
	​

)).

Разделяем эффект на два кармана:

A) Экономия комиссии (канальный сдвиг OTA → Direct)
Это только та часть direct-бронирований, которая появилась за счёт перетока из OTA, а не из-за общего роста 
𝐵
B.

Удобная аппроксимация:

Сколько direct было бы если выросла только конверсия, но доля каналов осталась прежней:

𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑜
𝑛
𝑙
𝑦
_
𝑐
𝑜
𝑛
𝑣
=
𝐵
1
×
𝑠
0
Direct
only_conv
=B
1
	​

×s
0
	​

.

Реальный direct после Roomie: 
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
1
=
𝐵
1
×
𝑠
1
Direct
1
	​

=B
1
	​

×s
1
	​

.

Тогда «дополнительный direct за счёт сдвига канала»:

Δ
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑠
ℎ
𝑖
𝑓
𝑡
=
max
⁡
(
0
,
  
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
1
−
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑜
𝑛
𝑙
𝑦
_
𝑐
𝑜
𝑛
𝑣
)
ΔDirect
shift
	​

=max(0,Direct
1
	​

−Direct
only_conv
).

Экономия комиссии/день ≈ 
Δ
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑠
ℎ
𝑖
𝑓
𝑡
×
𝑅
×
(
𝑘
𝑜
𝑡
𝑎
−
𝑘
𝑝
𝑟
𝑜
𝑐
)
ΔDirect
shift
	​

×R×(k
ota
	​

−k
proc
	​

).

За месяц: умножить на 
𝐷
D.

B) Дополнительная выручка (чистый прирост брони)
Это разница в количестве брони из-за 
𝑢
𝑐
𝑜
𝑛
𝑣
u
conv
	​

:

Δ
𝐵
=
𝐵
1
−
𝐵
0
ΔB=B
1
	​

−B
0
	​

.

Эти дополнительные брони распределяются по новым долям каналов 
𝑠
1
s
1
	​

 и 
1
−
𝑠
1
1−s
1
	​

.

Доп. direct-выручка/день: 
Δ
𝐵
×
𝑠
1
×
𝑅
×
(
1
−
𝑘
𝑝
𝑟
𝑜
𝑐
)
ΔB×s
1
	​

×R×(1−k
proc
	​

).

Доп. OTA-выручка/день: 
Δ
𝐵
×
(
1
−
𝑠
1
)
×
𝑅
×
(
1
−
𝑘
𝑜
𝑡
𝑎
)
ΔB×(1−s
1
	​

)×R×(1−k
ota
	​

).

Можно свести к валовой доп. марже/день и затем × 
𝐷
D.

Сравним с вашим примером на цифрах

Ваши входные: 
𝐼
=
100
I=100, 
𝑐
=
35
%
c=35% → 
𝐵
0
=
35
B
0
	​

=35 брони/день.
Вы берёте «+20%» как «дополнительные прямые = 35 × 20% = 7/день» и сразу умножаете на комиссию — это завышение.

Корректнее задать долю direct и её относительный рост:
Допустим, до Roomie 
𝑠
0
=
40
%
s
0
	​

=40% (14 direct и 21 OTA из 35).
Пусть 
𝑢
𝑐
𝑜
𝑛
𝑣
=
0
%
u
conv
	​

=0% (для чистоты сравнения) и 
𝑢
𝑠
ℎ
𝑎
𝑟
𝑒
=
+
20
%
u
share
	​

=+20%.
Тогда 
𝑠
1
=
0.40
×
1.20
=
0.48
s
1
	​

=0.40×1.20=0.48 (48% direct).

После Roomie direct/день: 
𝐵
1
×
𝑠
1
=
35
×
0.48
=
16.8
B
1
	​

×s
1
	​

=35×0.48=16.8.

«Только из-за перераспределения» добавилось direct: 
16.8
−
(
35
×
0.40
)
=
2.8
16.8−(35×0.40)=2.8 брони/день.

Это и есть переток из OTA (а не 7).

Экономия за месяц при 
𝑅
=
10,000
R=10,000, 
𝑘
𝑜
𝑡
𝑎
=
12
%
k
ota
	​

=12%, 
𝑘
𝑝
𝑟
𝑜
𝑐
=
0
%
k
proc
	​

=0% (для простоты), 
𝐷
=
30
D=30:

2.8
×
10,000
×
0.12
×
30
=
100,800
2.8×10,000×0.12×30=100,800 руб.
У вас получилось 184 800 руб (на 83% больше), потому что вы ошибочно посчитали 7/день как каналный переток, а не как общий «плюс».

Если добавить реалистичный эквайринг 
𝑘
𝑝
𝑟
𝑜
𝑐
=
2.5
%
k
proc
	​

=2.5%:

2.8
×
10,000
×
(
0.12
−
0.025
)
×
30
=
70,350
2.8×10,000×(0.12−0.025)×30=70,350 руб.

Что поменять в калькуляторе (минимум)

Разделить вклад на два блока и показывать отдельно:

Экономия комиссии (только переток OTA → Direct).

Дополнительная прибыль от прироста бронирований (за счёт роста конверсии/кросс-сейлов и т.д.).

Изменить «20%» на прирост доли direct, а не на «20% от всех брони»:

Вводим 
𝑢
𝑠
ℎ
𝑎
𝑟
𝑒
u
share
	​

 как относительный рост доли direct, либо 
Δ
𝑠
Δs как прирост в процентных пунктах.

Рассчитываем 
Δ
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑠
ℎ
𝑖
𝑓
𝑡
ΔDirect
shift
	​

 как разницу между 
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
1
Direct
1
	​

 и гипотетическим 
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑜
𝑛
𝑙
𝑦
_
𝑐
𝑜
𝑛
𝑣
Direct
only_conv
.

Заменить «22 рабочих дня» на 
𝐷
D дней периода.

Ясно определить базу комиссии и учесть издержки direct:

Пусть пользователь вводит ADR и среднюю длительность проживания (LOS), а вы считаете 
𝑅
=
𝐴
𝐷
𝑅
×
𝐿
𝑂
𝑆
R=ADR×LOS.

Добавьте поле стоимость процессинга 
𝑘
𝑝
𝑟
𝑜
𝑐
k
proc
	​

.

Опционально: дайте ввод для 
𝑠
0
s
0
	​

 (базовая доля direct) и, при желании, для 
𝑢
𝑐
𝑜
𝑛
𝑣
u
conv
	​

 (прирост конверсии). По умолчанию можно предлагать консервативные значения.

Итоговая упрощённая схема формул

𝐵
0
=
𝐼
×
𝑐
B
0
	​

=I×c

𝐵
1
=
𝐵
0
×
(
1
+
𝑢
𝑐
𝑜
𝑛
𝑣
)
B
1
	​

=B
0
	​

×(1+u
conv
	​

)

𝑠
1
=
min
⁡
(
1
,
  
𝑠
0
×
(
1
+
𝑢
𝑠
ℎ
𝑎
𝑟
𝑒
)
)
s
1
	​

=min(1,s
0
	​

×(1+u
share
	​

)) или 
𝑠
1
=
min
⁡
(
1
,
  
𝑠
0
+
Δ
𝑠
)
s
1
	​

=min(1,s
0
	​

+Δs)

𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑜
𝑛
𝑙
𝑦
_
𝑐
𝑜
𝑛
𝑣
=
𝐵
1
×
𝑠
0
Direct
only_conv
=B
1
	​

×s
0
	​


𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
1
=
𝐵
1
×
𝑠
1
Direct
1
	​

=B
1
	​

×s
1
	​


Δ
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑠
ℎ
𝑖
𝑓
𝑡
=
max
⁡
(
0
,
  
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
1
−
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑜
𝑛
𝑙
𝑦
_
𝑐
𝑜
𝑛
𝑣
)
ΔDirect
shift
	​

=max(0,Direct
1
	​

−Direct
only_conv
)

Экономия комиссии/месяц

Savings
=
Δ
𝐷
𝑖
𝑟
𝑒
𝑐
𝑡
𝑠
ℎ
𝑖
𝑓
𝑡
×
𝑅
×
(
𝑘
𝑜
𝑡
𝑎
−
𝑘
𝑝
𝑟
𝑜
𝑐
)
×
𝐷
Savings=ΔDirect
shift
	​

×R×(k
ota
	​

−k
proc
	​

)×D

Доп. прибыль от прироста брони/месяц (валовая, без операционных затрат)

Uplift
=
(
𝐵
1
−
𝐵
0
)
×
𝑅
×
[
𝑠
1
(
1
−
𝑘
𝑝
𝑟
𝑜
𝑐
)
+
(
1
−
𝑠
1
)
(
1
−
𝑘
𝑜
𝑡
𝑎
)
]
×
𝐷
Uplift=(B
1
	​

−B
0
	​

)×R×[s
1
	​

(1−k
proc
	​

)+(1−s
1
	​

)(1−k
ota
	​

)]×D

(Если хотите считать прибыль, а не валовую выручку, умножайте ещё на среднюю маржинальность на «комиссионной базе».)

Вывод

Текущая формула пересчитывает «экономию» и смешивает эффекты.

Исправьте: считайте экономией только переток OTA → Direct, а прирост конверсии — отдельно как дополнительную выручку.

Уберите «22 рабочих дня», уточните базу комиссии и добавьте издержки direct.